<!DOCTYPE html>
<html lang="en-IN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Summary - Electronics Store</title>
    <link rel="icon" type="image/x-icon" href="../assets/infinityMedia/favicon.png">
    <link rel="stylesheet" href="../assets/css/bootstrap.core.min.css">
    <link rel="stylesheet" href="../assets/css/userCustomizations.css">
    <style>
        .step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 0;
            background: white;
            margin-bottom: 20px;
        }
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 20px;
            font-weight: bold;
            position: relative;
        }
        .step.active {
            background: #2874f0;
            color: white;
        }
        .step.completed {
            background: #28a745;
            color: white;
        }
        .step.pending {
            background: #e9ecef;
            color: #6c757d;
        }
        .step::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 40px;
            height: 2px;
            background: #e9ecef;
            transform: translateY(-50%);
        }
        .step:last-child::after {
            display: none;
        }
        .step.completed::after {
            background: #28a745;
        }
        .product-summary {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .product-image {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-right: 15px;
        }
        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }
        .total-row {
            border-top: 2px solid #e9ecef;
            font-weight: bold;
            font-size: 18px;
        }
        .savings {
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="container-fluid py-2 header-container" style="background-color:#2874f0">
        <div class="row header align-items-center">
            <div class="col-2">
                <div class="menu-icon" onclick="goBack()">
                    <svg width="19" height="16" viewBox="0 0 19 16" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.556 7.847H1M7.45 1L1 7.877l6.45 6.817" stroke="#FFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"></path>
                    </svg> 
                </div>
            </div>
            <div class="col-8 text-center">
                <h5 class="text-white mb-0">Order Summary</h5>
            </div>
        </div>
    </div>

    <!-- Progress Steps -->
    <div class="step-indicator">
        <div class="step completed">‚úì</div>
        <div class="step active">2</div>
        <div class="step pending">3</div>
    </div>
    <div class="text-center mb-4">
        <small class="text-muted">Address ‚Üí Order Summary ‚Üí Payment</small>
    </div>

    <div class="container">
        <!-- Delivery Address -->
        <div class="card mb-3">
            <div class="card-body">
                <h6>Delivered to:</h6>
                <div id="deliveryAddress">
                    <p class="mb-1"><strong id="customerName">Loading...</strong></p>
                    <p class="text-muted small" id="customerAddress">Loading address...</p>
                </div>
            </div>
        </div>

        <!-- Product Summary -->
        <div class="card mb-3">
            <div class="card-body">
                <div class="product-summary" id="productSummary">
                    <!-- Product details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Price Details -->
        <div class="card mb-3">
            <div class="card-body">
                <h6 class="mb-3">Price Details</h6>
                <div class="price-row">
                    <span>Price (1 item)</span>
                    <span id="originalPrice">‚Çπ47,999.00</span>
                </div>
                <div class="price-row">
                    <span>Discount</span>
                    <span class="savings" id="discountAmount">- ‚Çπ47,132.00</span>
                </div>
                <div class="price-row">
                    <span>Delivery Charges</span>
                    <span class="text-success">FREE Delivery</span>
                </div>
                <div class="price-row total-row">
                    <span>Total Amount</span>
                    <span id="totalAmount">‚Çπ867.00</span>
                </div>
                <div class="mt-3 text-center">
                    <p class="savings mb-0">You will save - ‚Çπ47,132.00 on this order</p>
                </div>
            </div>
        </div>

        <!-- Security Features -->
        <div class="card mb-5">
            <div class="card-body text-center">
                <div class="row">
                    <div class="col-4">
                        <div class="mb-2">üõ°Ô∏è</div>
                        <small>Authentic</small>
                    </div>
                    <div class="col-4">
                        <div class="mb-2">üîí</div>
                        <small>Secure Payments</small>
                    </div>
                    <div class="col-4">
                        <div class="mb-2">‚Ü©Ô∏è</div>
                        <small>Easy Returns</small>
                    </div>
                </div>
                <div class="mt-3">
                    <p class="small text-muted">Safe and secure payments. Easy returns.<br>100% Authentic products.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Fixed Bottom Button -->
    <div class="button-container">
        <button class="buynow-button" onclick="proceedToPayment()">Continue</button>
    </div>

    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
    <script>
        function goBack() {
            window.history.back();
        }

        function proceedToPayment() {
            window.location.href = 'payment.html';
        }

        // Load saved data
        document.addEventListener('DOMContentLoaded', function() {
            // Load address
            const address = JSON.parse(localStorage.getItem('delivery_address') || '{}');
            if (address.fullName) {
                document.getElementById('customerName').textContent = address.fullName;
                document.getElementById('customerAddress').textContent = 
                    `${address.houseNo}, ${address.roadName}, ${address.city}, ${address.state} - ${address.pincode}`;
            }

            // Load product
            const title = localStorage.getItem('title') || '';
            const price = localStorage.getItem('price') || '';
            const mrp = localStorage.getItem('mrp') || '';
            const image = localStorage.getItem('image') || '';
            
            if (title) {
                document.getElementById('productSummary').innerHTML = `
                    <img src="${image}" alt="Product" class="product-image" onerror="this.src='../assets/infinityMedia/Q18Ifxk.png'">
                    <div class="flex-grow-1">
                        <h6 class="mb-1">${title.substring(0, 50)}...</h6>
                        <div class="d-flex align-items-center">
                            <span class="badge bg-success me-2">Special Offer</span>
                            <span class="text-muted text-decoration-line-through me-2">‚Çπ${mrp}</span>
                            <span class="fw-bold">‚Çπ${price}</span>
                        </div>
                        <p class="small text-muted mb-0">Qty: 1</p>
                    </div>
                `;
                
                // Update price details
                document.getElementById('originalPrice').textContent = `‚Çπ${mrp}`;
                document.getElementById('totalAmount').textContent = `‚Çπ${price}`;
                const discount = parseFloat(mrp.replace(/,/g, '')) - parseFloat(price.replace(/,/g, ''));
                document.getElementById('discountAmount').textContent = `- ‚Çπ${discount.toLocaleString()}`;
            }
        });
    </script>
</body>
</html>